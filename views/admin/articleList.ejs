<% include header %>

<div class="row why-div">
  	<div class="text-center">
        <h2>文章列表</h2>
  	</div>
    <hr class="hr-mid">
    <div class="sub-text text-center">
        <p class="font-1">
        	这里可以查看和编辑 文章 
     	</p>
    </div>
</div>

<table class="table">
	<tr>
		<th>序号</th>
		<th>文章封面</th>
		<th>文章分类</th>
		<th>文章名称</th>
		<th>文章作者</th>
		<th>创建时间</th>
		<th>文章编辑</th>
	</tr>
	
		<% articles.forEach(function(val,i){ %>
		<tr>
			<td><%=i+1%></td>
			<td>
				<img src="/<%= val.imgurl %>" onerror="this.src='/img/001.jpeg';this.onerror=null" class="imgurl">
			</td>
			<td><%= val.itemId.name %></td>
			<td><%= val.title %></td>
			<td><%= val.author %></td>
			<td><%= val.ctime.toLocaleString() %></td>
			<td>
				<a href="/admin/articleEdit/<%=val._id%>">编辑</a>
				|
				<a id="remove" href="/admin/articleRemove/<%=val._id%>" onclick="return confirm('您确定要删除吗?')">删除</a>
			</td>
		</tr>
		<% })%>		
	
</table>

<!-- 分页 -->
<nav aria-label="Page navigation">
  	<ul class="pagination">
    	<li><a href="/admin/articleList">首页</a></li>

    	<li><a href="/admin/articleList?page=<%=page -1%>" >上一页</a></li>
    	<li><a href="/admin/articleList?page=<%=page -1%>" class="prv"><%=page -1%></a></li>

    	
    	<li class="active"><a href="/admin/articleList?page=<%=page%>">第 <%=page%> 页</a></li>
    	

    	 <li><a href="/admin/articleList?page=<%=-(-page-1)%>" class="net"><%=-(-page-1)%></a></li>
    	 <li><a href="/admin/articleList?page=<%=-(-page-1)%>">下一页</a></li>

    	<li><a href="/admin/articleList?page=<%=maxPage%>">尾页</a></li>
  	</ul>
</nav>
<script>
	var prv = document.querySelector('.prv');
	var net = document.querySelector('.net');
	if(prv.innerHTML == 0) prv.style.display = 'none';
	if(net.innerHTML == <%=maxPage + 1%>) net.style.display = 'none';
</script>
<% include footer %>